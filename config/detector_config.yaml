# Detector Configuration
# All time-based thresholds are in SECONDS unless explicitly noted as FRAMES.

system:
  vin: "VIN-0001"
  target_fps: 30.0

# Removed: user.swap_threshold (unused)
# Removed: image.local_quality / image.remote_quality (not wired into SystemLogger)

detectors:
  drowsiness:
    perclos:
      window_sec: 30
      threshold: 0.25

    head_pose:
      pitch_abs_threshold_deg: 18.0

    score:
      on_threshold: 0.65
      off_threshold: 0.45
      hold_sec: 0.5
      release_sec: 1.0
      hard_close_sec: 2.0
      yawn_saturate_count: 3
      weights:
        perclos: 0.55
        eyes_closed: 0.25
        yawn: 0.15
        pitch: 0.05

    episode:
      start_threshold_sec: 0.5
      end_grace_sec: 1.5
      min_episode_sec: 2.0

    ear:
      low_threshold: 0.22
      high_threshold: 0.26
      drop_threshold: 0.10
      drop_window_frames: 15
      history_sec: 1.0

    blink:
      min_closed_frames: 1
      max_closed_frames: 10

    yawn:
      threshold_sec: 0.27
      cooldown_sec: 2.0
      hand_cover_distance_norm: 0.15
      frequency_window_sec: 120
      high_frequency_count: 3
      timestamps_max: 10

    expression_suppression:
      smile_frames: 15
      laugh_frames: 20

    severity:
      drowsiness:
        medium_sec: 2.0
        high_sec: 3.0
        critical_sec: 5.0

  distraction:
    thresholds:
      yaw_deg: 45.0
      pitch_down_deg: 20.0
      pitch_up_deg: 20.0

    timing:
      hands_visible_sec: 1.5
      gaze_sec: 1.2

    smoothing:
      history_frames: 5
      required_frames: 3
      face_visibility_history_frames: 10
      face_present_min_samples: 5
      partial_face_threshold: 0.4

    severity:
      long_duration_high_sec: 3.0

